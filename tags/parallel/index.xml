<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Parallel on Davidhamçš„åšå®¢</title><link>https://davidham3.github.io/blog/tags/parallel/</link><description>Recent content in Parallel on Davidhamçš„åšå®¢</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 24 Feb 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://davidham3.github.io/blog/tags/parallel/index.xml" rel="self" type="application/rss+xml"/><item><title>ä»130å€æ€§èƒ½æå‡çœ‹Pythonçš„æ‰¹é‡è®¡ç®—å’Œå¹¶è¡ŒåŒ–ç­–ç•¥ï¼štraj-dist-rsçš„å¹¶è¡Œç­–ç•¥å®ç°</title><link>https://davidham3.github.io/blog/p/%E4%BB%8E130%E5%80%8D%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E7%9C%8Bpython%E7%9A%84%E6%89%B9%E9%87%8F%E8%AE%A1%E7%AE%97%E5%92%8C%E5%B9%B6%E8%A1%8C%E5%8C%96%E7%AD%96%E7%95%A5traj-dist-rs%E7%9A%84%E5%B9%B6%E8%A1%8C%E7%AD%96%E7%95%A5%E5%AE%9E%E7%8E%B0/</link><pubDate>Tue, 24 Feb 2026 00:00:00 +0000</pubDate><guid>https://davidham3.github.io/blog/p/%E4%BB%8E130%E5%80%8D%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E7%9C%8Bpython%E7%9A%84%E6%89%B9%E9%87%8F%E8%AE%A1%E7%AE%97%E5%92%8C%E5%B9%B6%E8%A1%8C%E5%8C%96%E7%AD%96%E7%95%A5traj-dist-rs%E7%9A%84%E5%B9%B6%E8%A1%8C%E7%AD%96%E7%95%A5%E5%AE%9E%E7%8E%B0/</guid><description>&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘åˆ†äº«äº†å¦‚ä½•ç”¨ Rust é‡å†™ &lt;code&gt;traj-dist&lt;/code&gt;ï¼Œå®ç°äº†å•æ¬¡è·ç¦»è®¡ç®—çš„æ€§èƒ½æå‡ã€‚ä½†æ˜¯ï¼Œå½“é¢å¯¹å¤§è§„æ¨¡è½¨è¿¹æ•°æ®é›†æ—¶ï¼Œå•æ¬¡è°ƒç”¨å¹¶ä¸æ˜¯æœ€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦åšè½¨è¿¹åºåˆ—çš„èšç±»ï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦è®¡ç®—ä»»æ„ä¸¤æ¡è½¨è¿¹ä¹‹é—´çš„è·ç¦»ã€‚ä»¥åŠ¨æ€è§„åˆ’ç±»ç®—æ³•ä¸ºä¾‹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯&lt;code&gt;O(NM)&lt;/code&gt;ã€‚å‡å¦‚æœ‰ 1000 æ¡è½¨è¿¹ï¼Œéœ€è¦è®¡ç®—å®ƒä»¬ä¹‹é—´çš„æ‰€æœ‰è·ç¦»å¯¹ã€‚é‚£å°±æ˜¯ $1000 \times 1000 \times MN$ï¼Œå‡è®¾è½¨è¿¹å¹³å‡é•¿åº¦æ˜¯1000ï¼Œé‚£è‡³å°‘æœ‰1000^4çš„å¤æ‚åº¦ã€‚é‚£å¦‚æœè¦ç®—10ä¸‡æ¡è½¨è¿¹ä¹‹é—´çš„è·ç¦»å‘¢ï¼Ÿ1000ä¸‡å‘¢ï¼Ÿè¿™å°†æ˜¯éå¸¸å¤§çš„è®¡ç®—é‡ï¼ˆè‚¯å®šè¦ä¸Šåˆ†å¸ƒå¼äº†ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä¼šåˆ†äº« &lt;code&gt;traj-dist-rs&lt;/code&gt; çš„æ‰¹é‡è®¡ç®—æ¥å£å’Œå¹¶è¡ŒåŒ–ç­–ç•¥ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡æ­£ç¡®çš„æŠ€æœ¯è·¯çº¿å®ç°è¶…è¿‡&lt;strong&gt;130å€&lt;/strong&gt;çš„æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºè½¨è¿¹åºåˆ—èšç±»ã€knnç­‰ç®—æ³•ï¼Œéœ€è¦è®¡ç®—æ‰€æœ‰è½¨è¿¹ä¹‹é—´çš„è·ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;é—®é¢˜å®šä¹‰ï¼š&lt;/p&gt;
&lt;p&gt;ç»™å®šKæ¡è½¨è¿¹ï¼ˆ&lt;code&gt;List[np.ndarray]&lt;/code&gt;ï¼‰ï¼Œè®¡ç®—å®ƒä»¬ä¸¤ä¸¤ä¹‹é—´çš„è·ç¦»ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ª&lt;code&gt;(K, K)&lt;/code&gt;çš„è·ç¦»çŸ©é˜µã€‚ä¸ºé¿å…å†—ä½™è®¡ç®—ï¼Œæˆ‘ä»¬åªè®¡ç®—çŸ©é˜µçš„ä¸Šä¸‰è§’éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜æ˜¯ä»¥&lt;code&gt;traj-dist&lt;/code&gt;ä½œä¸ºæˆ‘ä»¬å®éªŒçš„åŸºçº¿ã€‚&lt;/p&gt;
&lt;h2 id="ä¸€åŸºå‡†æµ‹è¯•ä¼ ç»Ÿæ–¹æ¡ˆçš„æ€§èƒ½ç“¶é¢ˆ"&gt;ä¸€ã€åŸºå‡†æµ‹è¯•ï¼šä¼ ç»Ÿæ–¹æ¡ˆçš„æ€§èƒ½ç“¶é¢ˆ
&lt;/h2&gt;&lt;p&gt;ç»™å®š20æ¡è½¨è¿¹ï¼Œæ¯æ¡è½¨è¿¹çš„é•¿åº¦ä¸º1000ï¼Œè®¡ç®—è·ç¦»çŸ©é˜µçš„ä¸Šä¸‰è§’éƒ¨åˆ†ï¼Œè·ç¦»ä½¿ç”¨DTWã€‚å› æ­¤ä¸€å…±éœ€è¦è®¡ç®—190æ¬¡ï¼ˆå¯¹è§’çº¿ä¸è®¡ç®—ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰3ç§ç®€å•çš„è§£å†³æ€è·¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨åŒé‡forå¾ªç¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;traj-dist&lt;/code&gt;æä¾›çš„pdistå‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åŒé‡forå¾ªç¯+joblibã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;joblib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Parallel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;delayed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;tqdm&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;trange&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;traj_dist.distance&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tdist&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;NUM_TRAJECTORIES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;TRAJS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uniform&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NUM_TRAJECTORIES&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;WARMUP_RUNS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;num_runs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Warmup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WARMUP_RUNS&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Measure time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;times&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;trange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num_runs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;perf_counter&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;perf_counter&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;median&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;times&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test1&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NUM_TRAJECTORIES&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NUM_TRAJECTORIES&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;tdist&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dtw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TRAJS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;TRAJS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;euclidean&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test2&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;tdist&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pdist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TRAJS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;metric&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;dtw&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;type_d&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;euclidean&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test3&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;Parallel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n_jobs&lt;/span&gt;&lt;span class="o"&gt;=-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;delayed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tdist&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dtw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;euclidean&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;))(&lt;/span&gt;&lt;span class="n"&gt;TRAJS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;TRAJS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NUM_TRAJECTORIES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NUM_TRAJECTORIES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è·‘å‡ºæ¥çš„è€—æ—¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;tool&lt;/th&gt;
&lt;th&gt;technique&lt;/th&gt;
&lt;th&gt;running time(s)&lt;/th&gt;
&lt;th&gt;speedup&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 1&lt;/strong&gt;: double for-loop&lt;/td&gt;
&lt;td&gt;10.103s&lt;/td&gt;
&lt;td&gt;1x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 2&lt;/strong&gt;: traj-dist pdist&lt;/td&gt;
&lt;td&gt;10.088s&lt;/td&gt;
&lt;td&gt;1.001x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 3&lt;/strong&gt;: joblib parallel&lt;/td&gt;
&lt;td&gt;1.364s&lt;/td&gt;
&lt;td&gt;7.407x&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;traj-dist&lt;/code&gt;çš„ç»“æœè¿˜æ˜¯æœ‰ç‚¹è®©äººæƒŠè®¶çš„ï¼Œå› ä¸ºpdistç›¸è¾ƒäºåŒé‡forå¾ªç¯å‡ ä¹æ²¡æœ‰ä»»ä½•æå‡ï¼Œè¯´æ˜pdistæ²¡æœ‰æ¶ˆé™¤pythonè§£é‡Šå™¨å¸¦æ¥çš„ä¸åˆ©ã€‚èµ¶ç´§å»çœ‹äº†ä¸€ä¸‹æºç ï¼Œæ‰å‘ç°pdistå±…ç„¶æ˜¯åœ¨pythoné‡Œé¢é€šè¿‡åŒé‡forå¾ªç¯å®ç°çš„ï¼Œæ²¡æœ‰ç”¨cythonåŠ é€ŸğŸ˜‚ã€‚é‚£æˆ‘ä»¬åç»­éƒ½ä¸ç”¨è€ƒè™‘è¿™ä¸ªå‡½æ•°äº†ã€‚&lt;/p&gt;
&lt;p&gt;joblibå¹¶è¡Œæœ‰æ¯”è¾ƒæ˜æ˜¾çš„æå‡ï¼Œå› ä¸ºjoblibé»˜è®¤ä½¿ç”¨lokyä½œä¸ºåç«¯å¯åŠ¨å¤šè¿›ç¨‹ï¼Œå¤šä¸ªè¿›ç¨‹åŒæ—¶è®¡ç®—ï¼Œæˆ‘æµ‹è¯•ç”¨çš„æœºå™¨æ˜¯20ä¸ªCPUæ ¸å¿ƒï¼Œjoblibåœ¨è®¾ç½®&lt;code&gt;n_jobs=-1&lt;/code&gt;çš„æ—¶å€™ï¼Œä¼šå¯åŠ¨å’ŒCPUç›¸åŒæ•°é‡çš„è¿›ç¨‹æ•°ã€‚&lt;/p&gt;
&lt;h2 id="äºŒç¬¬ä¸€å±‚åŠ é€Ÿé›¶æ‹·è´ä¸rustçš„é™ç»´æ‰“å‡»"&gt;äºŒã€ç¬¬ä¸€å±‚åŠ é€Ÿï¼šé›¶æ‹·è´ä¸Rustçš„é™ç»´æ‰“å‡»
&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;traj-dist-rs&lt;/code&gt;å®Œæˆç›¸åŒçš„å®éªŒï¼Œçœ‹çœ‹æ•ˆæœï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;tool&lt;/th&gt;
&lt;th&gt;technique&lt;/th&gt;
&lt;th&gt;running time(s)&lt;/th&gt;
&lt;th&gt;speedup&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 1&lt;/strong&gt;: double for-loop&lt;/td&gt;
&lt;td&gt;0.631s&lt;/td&gt;
&lt;td&gt;16.011x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 3&lt;/strong&gt;: joblib parallel&lt;/td&gt;
&lt;td&gt;0.105s&lt;/td&gt;
&lt;td&gt;96.219x&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒåŒé‡forå¾ªç¯çš„æ–¹æ¡ˆæ¯”&lt;code&gt;traj-dist&lt;/code&gt;å¿«äº†16.011å€ï¼Œå¦‚æœä½¿ç”¨Joblibï¼Œè¾¾åˆ°äº†96.219å€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç»“æœè¿˜æ˜¯æ¯”è¾ƒæƒŠäººçš„ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« é‡Œé¢æˆ‘ä»¬è®²äº†ï¼Œ&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„æ ¸å¿ƒæå‡åœ¨äºå¼•å…¥é›¶æ‹·è´ï¼Œè®©rustç›´æ¥è¯»å–pythonä¸­numpy.ndarrayçš„åº•å±‚æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;è¿™è¯´æ˜å½“å‰&lt;code&gt;traj-dist-rs&lt;/code&gt;ä½¿ç”¨çš„é›¶æ‹·è´è®¾è®¡é…åˆrustçš„é«˜æ€§èƒ½å¯ä»¥è½»æ¾è¶…è¶Š&lt;code&gt;traj-dist&lt;/code&gt;ä½¿ç”¨cythonç¼–å†™çš„åŠ é€Ÿä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œ&lt;code&gt;traj-dist-rs&lt;/code&gt;è¿˜æ²¡æœ‰å®ç°&lt;code&gt;pdist&lt;/code&gt;å‡½æ•°ï¼Œè€ƒè™‘åˆ°pythonç”¨æˆ·ä¸ºäº†åŠ é€Ÿä¸€å®šä¼šä½¿ç”¨å¤šè¿›ç¨‹åŠ é€Ÿï¼Œé‚£ä¹ˆ&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„&lt;code&gt;pdist&lt;/code&gt;å‡½æ•°åœ¨è®¾è®¡ä¸Šå°±ä¸€å®šè¦è€ƒè™‘åˆ°å¹¶è¡Œèƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h2 id="ä¸‰å¹¶è¡Œæ–¹æ¡ˆæ„æƒ³"&gt;ä¸‰ã€å¹¶è¡Œæ–¹æ¡ˆæ„æƒ³
&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬åˆ†åˆ«è®¨è®ºpythonçš„å¤šè¿›ç¨‹å¹¶è¡Œä¸rustçš„rayonå¹¶è¡Œã€‚&lt;/p&gt;
&lt;h3 id="31-pythonå¤šè¿›ç¨‹å¹¶è¡Œ"&gt;3.1 Pythonå¤šè¿›ç¨‹å¹¶è¡Œ
&lt;/h3&gt;&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒGILé™åˆ¶äº†Pythonçš„å¹¶è¡Œæ•ˆç‡ï¼Œåªèƒ½é€šè¿‡å¤šè¿›ç¨‹å®ç°å¹¶è¡ŒåŠ é€Ÿè®¡ç®—ï¼Œå¯ä»¥ä½¿ç”¨pythonè‡ªå¸¦çš„å¤šè¿›ç¨‹åº“ï¼Œå¦‚multiprocessingï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼joblibè¿™æ ·çš„åº“ã€‚æœ¬è´¨ä¸Šéƒ½æ˜¯é€šè¿‡å¤šè¿›ç¨‹å®ç°å¹¶è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œä¸è®ºæ˜¯å“ªç§å¹¶è¡Œï¼Œä¸€å®šä¼šé‡åˆ°ä¸‹é¢çš„3ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;h4 id="1-åˆå§‹åŒ–å¼€é”€"&gt;1. åˆå§‹åŒ–å¼€é”€
&lt;/h4&gt;&lt;p&gt;æœ¬è´¨æ˜¯pythonä¸»è¿›ç¨‹ä¼šå¯åŠ¨å¤šä¸ªå­è¿›ç¨‹ï¼Œè¿™äº›å­è¿›ç¨‹çš„å¯åŠ¨æ˜¯æœ‰ä¸€å®šçš„å¼€é”€çš„ã€‚å½“è®¡ç®—é‡å˜å¤§çš„æ—¶å€™ï¼Œè¿™ä¸ªå¼€é”€å°±å¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯è®¡ç®—é‡å°çš„æ—¶å€™ï¼Œè¿›ç¨‹çš„åˆå§‹åŒ–åè€Œä¼šæˆä¸ºç“¶é¢ˆã€‚&lt;/p&gt;
&lt;h4 id="2-é€šä¿¡å¼€é”€"&gt;2. é€šä¿¡å¼€é”€
&lt;/h4&gt;&lt;p&gt;è¿›ç¨‹ä¹‹é—´çš„æ•°æ®æ˜¯éš”ç¦»çš„ï¼Œä¸èƒ½å…±äº«ï¼Œä½¿ç”¨å¤šè¿›ç¨‹çš„æ—¶å€™ï¼Œå¤§æ¦‚ä¼šç»å†ä¸‹é¢çš„æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‚æ•°å’Œå‡½æ•°ä¼šä»¥pickleçš„å½¢å¼åºåˆ—åŒ–ï¼Œç”±ä¸»è¿›ç¨‹ä¼ é€’åˆ°å¦ä¸€ä¸ªpythonè¿›ç¨‹ï¼ˆå­è¿›ç¨‹ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;å­è¿›ç¨‹ååºåˆ—åŒ–ï¼Œè¿›è¡Œè¿ç®—ï¼Œè¿ç®—ç»“æœé€šè¿‡pickleåºåˆ—åŒ–ä¼ é€’åˆ°ä¸»è¿›ç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;ä¸»è¿›ç¨‹ååºåˆ—åŒ–æ‹¿åˆ°æœ€ç»ˆç»“æœï¼Œæ”¶é›†æ‰€æœ‰å­è¿›ç¨‹çš„ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ä¸€å…±æ˜¯2æ¬¡ä¿¡æ¯ä¼ é€’ã€2æ¬¡åºåˆ—åŒ–ã€2æ¬¡ååºåˆ—åŒ–ã€‚æ•°æ®é‡è¶Šå¤§ï¼Œè¿™ä¸ªå¼€é”€è¶Šå¤§ï¼Œå½“ç„¶ä¹Ÿæ˜¯æœ‰é¿å¼€çš„æ–¹æ¡ˆçš„ï¼Œæ¯”å¦‚ä½¿ç”¨å…±äº«å†…å­˜ï¼šæå‰å°†æ•°æ®å†™å…¥å…±äº«å†…å­˜ï¼Œå­è¿›ç¨‹ä»å…±äº«å†…å­˜è¯»å–è¿™éƒ¨åˆ†æ•°æ®ã€‚æœ¬æ–‡å…ˆä¸è®¨è®ºè¿™ä¸ªæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h4 id="3-è°ƒåº¦ä¸è´Ÿè½½å‡è¡¡å¼€é”€"&gt;3. è°ƒåº¦ä¸è´Ÿè½½å‡è¡¡å¼€é”€
&lt;/h4&gt;&lt;p&gt;ä¸»è¦æœ‰2ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è´Ÿè½½ä¸å‡ï¼šå¦‚æœ1ä¸ªè¿›ç¨‹æ‰§è¡Œçš„éƒ½æ˜¯ä¸€äº›è®¡ç®—é‡æ¯”è¾ƒå¤§çš„å·¥ä½œï¼Œå…¶ä»–è¿›ç¨‹éƒ½æ˜¯è½»é‡çš„å·¥ä½œï¼Œé‚£ä¹ˆå…¶ä»–è¿›ç¨‹å®Œæˆä»»åŠ¡åå°±ä¼šé—²ç½®ï¼Œå°±åƒæœ¨æ¡¶åŸç†ä¸€æ ·ã€‚&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡è°ƒåº¦å¼€é”€ï¼šä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªé˜Ÿåˆ—ç»´æŠ¤ä»»åŠ¡ï¼Œæ¯ä¸ªè¿›ç¨‹ä»é˜Ÿåˆ—é‡Œé¢æ‹‰å–ä»»åŠ¡è¿›è¡Œæ¶ˆè´¹ï¼Œä½†æ˜¯å•ä¸ªä»»åŠ¡çš„ä»»åŠ¡é‡éœ€è¦è®¾ä¸ºå¤šå¤§ï¼Ÿå¦‚æœè®¾ç½®çš„å°äº†ï¼Œå­è¿›ç¨‹ä¼šé¢‘ç¹æ‹‰å–ï¼Œæ¯æ¬¡æ‹‰å–éƒ½æœ‰å›ºå®šå¼€é”€ï¼Œé€ æˆæ€»å¼€é”€å˜å¤§ï¼›è®¾ç½®çš„å¤§äº†å¯¹å†…å­˜å‹åŠ›åˆæ¯”è¾ƒå¤§ï¼Œè€Œä¸”åˆæœ‰å¯èƒ½é€ æˆè´Ÿè½½ä¸å‡çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä½†æ˜¯è¯´äº†è¿™ä¹ˆå¤šï¼ŒPythoné‡Œé¢ä¸ºäº†åŠ é€Ÿè¿ç®—ï¼Œå¤šè¿›ç¨‹å¹¶è¡Œä¸€å®šæ˜¯é¿ä¸å¼€çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œæˆ‘ä¸ªäººè¿˜æ˜¯å–œæ¬¢å…±äº«å†…å­˜çš„æ–¹æ¡ˆï¼Œå°¤å…¶æ˜¯ç»“åˆpyarrowã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°ä¸Šé¢çš„å®éªŒï¼Œå¯ä»¥çœ‹åˆ°joblibç¡®å®å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ï¼Œå› æ­¤å¯¹äºå¤§éƒ¨åˆ†åœºæ™¯æ¥è¯´ï¼Œä½¿ç”¨joblibåªéœ€è¦å‡ è¡Œä»£ç å°±å¯ä»¥å¿«é€Ÿæå‡æ€§èƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„æ–¹æ¡ˆï¼Œç›¸å½“äº1è¡Œä»£ç æ¢å–æˆå€æå‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™é‡Œä¹Ÿéœ€è¦å¤šè®²ä¸€å¥ï¼Œjoblibçš„ä¸€å¤§ä¼˜åŠ¿æ˜¯ä¸ºpythonç”¨æˆ·æä¾›äº†éå¸¸Pythonicçš„å¹¶è¡Œæ¥å£ï¼Œé€šè¿‡ç®€å•çš„&lt;code&gt;Parallel(n_jobs=-1)(delayed(...))&lt;/code&gt;å®ç°å¤šè¿›ç¨‹ä»£ç å®ç°ï¼Œè¿™æ˜¯éå¸¸ä¼˜é›…çš„ã€‚&lt;/p&gt;
&lt;h3 id="32-rustrayonçš„å¹¶è¡ŒåŠ é€Ÿæ–¹æ¡ˆ"&gt;3.2 Rust+Rayonçš„å¹¶è¡ŒåŠ é€Ÿæ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;rusté‡Œé¢åšå¹¶è¡Œï¼Œè‚¯å®šé¿ä¸å¼€ä½¿ç”¨Rayonï¼ŒRayonå·²ç»æˆä¸ºrustç”Ÿæ€ä¸­æ•°æ®å¹¶è¡Œçš„äº‹å®æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;Rayonè‡ªèº«çš„ä¼˜åŠ¿æœ‰å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æè‡´çš„æ˜“ç”¨æ€§ï¼šåƒjoblibä¸€æ ·æä¾›äº†éå¸¸å‚»ç“œçš„ä½¿ç”¨æ–¹å¼ï¼Œæ”¹é€ æˆæœ¬æä½ã€‚&lt;/li&gt;
&lt;li&gt;æ— ç•å¹¶å‘ï¼šç¼–è¯‘æ—¶å°±å¯ä»¥ä¿è¯å®‰å…¨ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ— éœ€åŠ é”ã€‚&lt;/li&gt;
&lt;li&gt;å·¥ä½œçªƒå–ï¼šæŸä¸ªçº¿ç¨‹å®Œæˆè‡ªå·±æ‰€æœ‰ä»»åŠ¡ä¹‹åä¼šå»å…¶ä»–ç¹å¿™çº¿ç¨‹ä¸­çªƒå–ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç›¸æ¯”ä¸Šé¢çš„pythonå¤šè¿›ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆå§‹åŒ–å¼€é”€ï¼šrayonç”¨çº¿ç¨‹ï¼Œå¼€é”€æ›´ä½ã€‚&lt;/li&gt;
&lt;li&gt;é€šä¿¡å¼€é”€ï¼šæ•°æ®è·¨çº¿ç¨‹å…±äº«ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒåº¦ä¸è´Ÿè½½å‡è¡¡å¼€é”€ï¼šå·¥ä½œçªƒå–ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„&lt;code&gt;pdist&lt;/code&gt;ä¸€å®šä¼šä½¿ç”¨Rayonå®Œæˆå¹¶è¡Œè®¡ç®—çš„å·¥ä½œï¼Œä»¥å®ç°æœ€ä½³æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id="å››å·…å³°å¯¹å†³130å€æ€§èƒ½æå‡"&gt;å››ã€å·…å³°å¯¹å†³ï¼š130å€æ€§èƒ½æå‡
&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬ç›´æ¥çœ‹é€šè¿‡rayonåŠ é€Ÿåçš„pdistçš„æ€§èƒ½å§ï¼Œåé¢å†çœ‹å…·ä½“å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç¬¬ä¸€èŠ‚çš„å®éªŒé‡Œé¢ç»™å‡ºäº†3ç§è·¯çº¿ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨åŒé‡forå¾ªç¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;traj-dist&lt;/code&gt;æä¾›çš„pdistå‡½æ•°ã€‚ï¼ˆå®é™…ä¸Šè¿™ä¸ªå’Œç¬¬ä¸€ä¸ªä¸€æ ·ï¼‰&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åŒé‡forå¾ªç¯+joblibã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;traj-dist-rs&lt;/code&gt;æä¾›çš„pdistå‡½æ•°æ”¯æŒäº†ä¸²è¡Œå’Œå¹¶è¡Œçš„é€‰é¡¹å¯ä»¥é€‰æ‹©ï¼Œå› æ­¤å°±å½¢æˆäº†4æ¡è·¯çº¿ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨åŒé‡forå¾ªç¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;traj-dist-rs&lt;/code&gt;æä¾›çš„pdistå‡½æ•°ï¼ˆä¸²è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åŒé‡forå¾ªç¯+joblibã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;traj-dist-rs&lt;/code&gt;æä¾›çš„pdistå‡½æ•°ï¼ˆå¹¶è¡Œï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™é‡Œè®²ä¸€ä¸‹ä¸Šé¢çš„4æ¡æŠ€æœ¯è·¯çº¿ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æŠ€æœ¯è·¯çº¿&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Route1: åŒé‡forå¾ªç¯&lt;/td&gt;
&lt;td&gt;è¿™ä¸ªæ–¹æ¡ˆè°ƒç”¨çš„dtwæ˜¯traj-dist-rsä¼˜åŒ–è¿‡çš„ï¼Œt1ä¸t2ä»pythonè½¬ç§»åˆ°rustçš„æ—¶å€™æ˜¯é›¶æ‹·è´ï¼Œæ€§èƒ½å¾ˆå¥½ã€‚ä½†æ˜¯åŒé‡forå¾ªç¯åœ¨pythoné‡Œé¢ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºcpythonçš„è§£é‡Šæ“ä½œä¼šæ‹–ç´¯è¿™é‡Œçš„æ€§èƒ½ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Route2: rustä¸²è¡Œ&lt;/td&gt;
&lt;td&gt;rustå¯ä»¥é€šè¿‡é›¶æ‹·è´ç›´æ¥è¯»å–TRAJSé‡Œé¢çš„æ•°æ®ï¼Œå†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡åŒé‡forå¾ªç¯è°ƒç”¨dtwå‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œä½†æ˜¯è¿™ä¸ªforå¾ªç¯ä¼šæ¯”cpythonå¿«å¤šäº†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Route3: joblibå¹¶è¡Œ&lt;/td&gt;
&lt;td&gt;é€šè¿‡joblibå®ç°å¤šè¿›ç¨‹å¹¶è¡Œï¼ˆé»˜è®¤æ˜¯lokyåç«¯ï¼‰ï¼Œè™½ç„¶è°ƒç”¨çš„æ˜¯traj-dist-rsçš„dtwï¼Œä½†æ˜¯t1å’Œt2è¦ä»ä¸»è¿›ç¨‹è½¬ç§»åˆ°å­è¿›ç¨‹ï¼Œè¿™é‡Œä¼šå‘ç”Ÿæ•°æ®åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œå°±ç›¸å½“äºè¾“å…¥æ•°æ®å¤åˆ¶äº†ä¸¤æ¬¡ï¼›è€Œè¿”å›å€¼ä¹Ÿæ˜¯è¦åšä¸€æ¬¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸¤æ¬¡ã€‚ä½†æ˜¯å¯¹äºpythonæ¥è¯´ï¼Œæ˜¯ä¸ªä¸é”™çš„å¹¶è¡Œæ–¹æ¡ˆã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Route4: rayonå¹¶è¡Œ&lt;/td&gt;
&lt;td&gt;rusté€šè¿‡é›¶æ‹·è´è¯»å–TRAJSé‡Œé¢çš„æ•°æ®ï¼Œrayoné€šè¿‡å¤šçº¿ç¨‹æ‰§è¡Œdtwï¼Œä¸ä¸Šé¢çš„joblibç±»ä¼¼ï¼Œä¸è¿‡æ²¡æœ‰è·¨è¿›ç¨‹æ•°æ®ä¼ è¾“ã€è¿›ç¨‹ç»´æŠ¤å¼€é”€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä¸‹é¢æœ‰ä¸¤ä¸ªæµ‹è¯•ç»“æœï¼Œä»ç„¶å–20æ¡è½¨è¿¹ï¼Œæ¯æ¬¡éƒ½æ˜¯å–5æ¬¡æµ‹é‡çš„ä¸­ä½æ•°ã€‚&lt;/p&gt;
&lt;h3 id="41-é«˜è®¡ç®—è´Ÿè½½è½¨è¿¹é•¿åº¦1000"&gt;4.1 é«˜è®¡ç®—è´Ÿè½½ï¼šè½¨è¿¹é•¿åº¦=1000
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;tool&lt;/th&gt;
&lt;th&gt;technique&lt;/th&gt;
&lt;th&gt;running time(s)&lt;/th&gt;
&lt;th&gt;speedup&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 1&lt;/strong&gt;: double for-loop&lt;/td&gt;
&lt;td&gt;10.103s&lt;/td&gt;
&lt;td&gt;1x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 3&lt;/strong&gt;: joblib parallel&lt;/td&gt;
&lt;td&gt;1.364s&lt;/td&gt;
&lt;td&gt;7.407x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 1&lt;/strong&gt;: double for-loop&lt;/td&gt;
&lt;td&gt;0.631s&lt;/td&gt;
&lt;td&gt;16.011x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 2&lt;/strong&gt;: rust serial (pdist)&lt;/td&gt;
&lt;td&gt;0.628s&lt;/td&gt;
&lt;td&gt;16.088x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 3&lt;/strong&gt;: joblib parallel&lt;/td&gt;
&lt;td&gt;0.105s&lt;/td&gt;
&lt;td&gt;96.219x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 4&lt;/strong&gt;: rayon parallel (pdist)&lt;/td&gt;
&lt;td&gt;0.078s&lt;/td&gt;
&lt;td&gt;129.526x&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç»“æœåˆ†æï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Pythonå¾ªç¯å¼€é”€ vs Rustå¾ªç¯å¼€é”€ï¼š&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„Pythonå¾ªç¯ï¼ˆ0.631sï¼‰å’ŒRustä¸²è¡Œpdistï¼ˆ0.628sï¼‰è€—æ—¶å‡ ä¹ç›¸åŒã€‚è¿™è¯´æ˜åœ¨é«˜è®¡ç®—è´Ÿè½½ä¸‹ï¼ŒDTWç®—æ³•æœ¬èº«çš„è€—æ—¶å æ®ä¸»å¯¼ï¼ŒPythonå¾ªç¯çš„å¼€é”€æ˜¾å¾—ä¸é‚£ä¹ˆé‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;å¤šè¿›ç¨‹ vs å¤šçº¿ç¨‹ï¼šRayonå¹¶è¡Œï¼ˆ0.078sï¼‰æ˜æ˜¾ä¼˜äºJoblibï¼ˆ0.105sï¼‰ï¼Œè¿™å¾—ç›Šäºå…¶æ›´ä½çš„å¼€é”€å’Œæ›´é«˜æ•ˆçš„çº¿ç¨‹é—´åä½œã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆçš„èƒœåˆ©ï¼š&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„åŸç”Ÿå¹¶è¡Œ pdist æ¥å£ï¼Œç›¸è¾ƒäºæœ€åˆçš„&lt;code&gt;traj-dist&lt;/code&gt;åŸºå‡†ï¼Œå®ç°äº†è¿‘&lt;strong&gt;130å€&lt;/strong&gt;çš„æ€§èƒ½é£è·ƒï¼è¿™æ­£æ˜¯æˆ‘ä»¬è¿½æ±‚çš„æ›´é«˜æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="42-ä½è®¡ç®—è´Ÿè½½è½¨è¿¹é•¿åº¦10"&gt;4.2 ä½è®¡ç®—è´Ÿè½½ï¼šè½¨è¿¹é•¿åº¦=10
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;tool&lt;/th&gt;
&lt;th&gt;technique&lt;/th&gt;
&lt;th&gt;running time(s)&lt;/th&gt;
&lt;th&gt;speedup&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 1&lt;/strong&gt;: double for-loop&lt;/td&gt;
&lt;td&gt;0.00186s&lt;/td&gt;
&lt;td&gt;1x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 3&lt;/strong&gt;: joblib parallel&lt;/td&gt;
&lt;td&gt;0.0653s&lt;/td&gt;
&lt;td&gt;0.028x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 1&lt;/strong&gt;: double for-loop&lt;/td&gt;
&lt;td&gt;0.000139s&lt;/td&gt;
&lt;td&gt;13.381x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 2&lt;/strong&gt;: rust serial (pdist)&lt;/td&gt;
&lt;td&gt;0.0000711s&lt;/td&gt;
&lt;td&gt;26.160x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 3&lt;/strong&gt;: joblib parallel&lt;/td&gt;
&lt;td&gt;0.0545s&lt;/td&gt;
&lt;td&gt;0.034x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Route 4&lt;/strong&gt;: rayon parallel (pdist)&lt;/td&gt;
&lt;td&gt;0.00201s&lt;/td&gt;
&lt;td&gt;0.925x&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ç»“æœåˆ†æï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¹¶è¡ŒåŒ–çš„ä»£ä»·ï¼šæ‰€æœ‰å¹¶è¡Œæ–¹æ¡ˆï¼ˆJoblibå’ŒRayonï¼‰çš„æ€§èƒ½éƒ½ä¸å¦‚ä¸²è¡Œã€‚Joblibçš„è¿›ç¨‹å¯åŠ¨å’Œæ•°æ®åºåˆ—åŒ–å¼€é”€å°¤ä¸ºå·¨å¤§ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™äº†ä¸¤ä¸ªæ•°é‡çº§ã€‚Rayonè™½ç„¶å¼€é”€å°å¾—å¤šï¼Œä½†ä¾ç„¶ä¸æ•Œæœ€å¿«çš„ä¸²è¡Œå®ç°ã€‚&lt;/li&gt;
&lt;li&gt;è§£é‡Šå™¨å¼€é”€çš„å‡¸æ˜¾ï¼šåœ¨ä½è®¡ç®—è´Ÿè½½ä¸‹ï¼Œ&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„Rustä¸²è¡Œpdistæ¯”å…¶Pythonå¾ªç¯å¿«äº†è¿‘2å€ã€‚è¿™è¯´æ˜å½“æ ¸å¿ƒè®¡ç®—éå¸¸å¿«æ—¶ï¼ŒPythonè§£é‡Šå™¨æœ¬èº«é‚£å¾®ä¸è¶³é“çš„å¾ªç¯å¼€é”€å°±æˆäº†ä¸»è¦ç“¶é¢ˆã€‚&lt;/li&gt;
&lt;li&gt;æœ€ä½³ç­–ç•¥ï¼šåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæœ€å¿«çš„æ–¹æ¡ˆæ˜¯è°ƒç”¨&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„ä¸²è¡Œ pdist å‡½æ•°ã€‚å®ƒæ—¢é¿å…äº†Pythonçš„å¾ªç¯å¼€é”€ï¼Œä¹Ÿé¿å…äº†å¹¶è¡Œçš„ç®¡ç†å¼€é”€ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="äº”å…·ä½“å®ç°traj-dist-rsçš„æ€§èƒ½é­”æ³•"&gt;äº”ã€å…·ä½“å®ç°ï¼štraj-dist-rsçš„æ€§èƒ½é­”æ³•
&lt;/h2&gt;&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šï¼Œæ ¸å¿ƒè¿˜æ˜¯è¦è®²&lt;code&gt;traj-dist-rs&lt;/code&gt;ä¸ºäº†æ‰¹é‡è¿ç®—ï¼Œåšäº†å“ªäº›å·¥ä½œã€‚&lt;/p&gt;
&lt;h3 id="51-rayonä¸€è¡Œä»£ç è§£é”å¹¶è¡Œ"&gt;5.1 Rayonï¼šä¸€è¡Œä»£ç è§£é”å¹¶è¡Œ
&lt;/h3&gt;&lt;p&gt;æœ€æ ¸å¿ƒçš„åœ°æ–¹å°±åœ¨äºrayonã€‚å› ä¸º&lt;code&gt;traj-dist-rs&lt;/code&gt;å·²ç»æ”¯æŒäº†é›¶æ‹·è´è¯»å–pythonä¸­çš„numpy.ndarrayï¼Œé‚£ä¹ˆåªéœ€è¦å¾ˆç®€å•çš„ä½¿ç”¨rayonåšå¹¶è¡Œè®¡ç®—å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;compute_pdist_parallel&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trajectories&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;calculator&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nc"&gt;D&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;f64&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;where&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;: &lt;span class="nc"&gt;CoordSequence&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Sync&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;D&lt;/span&gt;: &lt;span class="nc"&gt;Distance&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;trajectories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Create index pairs for all unique pairs (i, j) where i &amp;lt; j
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pairs&lt;/span&gt;: &lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;usize&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;usize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flat_map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;..&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;move&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;collect&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Compute distances in parallel using Rayon&amp;#39;s global thread pool
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pairs&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;into_par_iter&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;calculator&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;distance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;trajectories&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;trajectories&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;collect&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å°±è¿™ä¹ˆç®€å•ï¼Œæ ¸å¿ƒå°±æ˜¯å¼•å…¥&lt;code&gt;into_par_iter&lt;/code&gt;ï¼Œç„¶åå°±è‡ªåŠ¨å¹¶è¡Œäº†ã€‚è¿™é‡Œçš„&lt;code&gt;Distance&lt;/code&gt;æä¾›äº†ä¸€ä¸ªå«distanceçš„æ–¹æ³•ï¼Œç”¨äºè®¡ç®—ä¸¤æ¡è½¨è¿¹ä¹‹é—´çš„è·ç¦»ï¼Œæ¯”å¦‚dtwï¼Œedrç­‰ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä»pythoné‡Œé¢ä¼ é€’ç»™rustçš„æ˜¯ä¸€ä¸ª&lt;code&gt;List[np.ndarray]&lt;/code&gt;ï¼Œrustæ‹¿åˆ°ä¹‹åå°†å…¶è½¬æ¢ä¸º&lt;code&gt;&amp;amp;[CoordSequence]&lt;/code&gt;å¯¹åº”çš„å…·ä½“ç±»å‹ï¼Œå°±å¯ä»¥å¤ç”¨è¿™ä¸ªå¹¶è¡Œè®¡ç®—çš„pdistå‡½æ•°äº†ã€‚è‡³äº&lt;code&gt;np.ndarray&lt;/code&gt;å¦‚ä½•è½¬&lt;code&gt;CoordSequence&lt;/code&gt;ï¼Œè¿™ä¸ªå°±æ˜¯ä¸Šæ¬¡è®²çš„ï¼Œé€šè¿‡PyO3å–å‡º&lt;code&gt;ndarray&lt;/code&gt;åº•å±‚çš„åˆ‡ç‰‡ï¼Œç„¶åå°è£…åˆ°ä¸€ä¸ªå®ç°äº†&lt;code&gt;CoordSequence&lt;/code&gt;è¿™ä¸ªtraitçš„structé‡Œé¢å°±å¯ä»¥äº†ã€‚é‚£&lt;code&gt;List&lt;/code&gt;å¦‚ä½•è½¬&lt;code&gt;&amp;amp;[]&lt;/code&gt;ï¼Œè¿™ä¸ªå°±ä¸ç”¨è¯´äº†ã€‚&lt;/p&gt;
&lt;h3 id="52-bincodeä¸ºpickleåºåˆ—åŒ–åŠ é€Ÿ"&gt;5.2 Bincodeï¼šä¸ºPickleåºåˆ—åŒ–åŠ é€Ÿ
&lt;/h3&gt;&lt;p&gt;å› ä¸º&lt;code&gt;traj-dist-rs&lt;/code&gt;æ”¯æŒpythonï¼Œæ‰€ä»¥ä¸€å®šè¦è€ƒè™‘ç±»ä¼¼ä¸Šé¢é€šè¿‡multiprocessingæˆ–è€…joblibå®ç°å¤šè¿›ç¨‹å¹¶è¡Œçš„æ–¹æ¡ˆã€‚é‚£ä¹ˆå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œpickleåºåˆ—åŒ–çš„æ€§èƒ½å°±å¾ˆå…³é”®ã€‚è€ƒè™‘åˆ°&lt;code&gt;traj-dist-rs&lt;/code&gt;é‡Œé¢çš„åŠ¨æ€è§„åˆ’ç®—æ³•è¿”å›çš„ç±»å‹éƒ½æ˜¯ä¸€ä¸ªRustå®šä¹‰çš„&lt;code&gt;PyDpResult&lt;/code&gt;ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªç±»å‹çš„åºåˆ—åŒ–æ€§èƒ½åšæå‡å°±å¾ˆé‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆè¯´ä¸€ä¸‹è¿™é‡Œæ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è€ƒè™‘åˆ°åŠ¨æ€è§„åˆ’ç®—æ³•çš„è¿”å›å€¼æœ‰ä¸€ä¸ªç»“æœï¼Œè¿˜å¯èƒ½æœ‰å®Œæ•´çš„åŠ¨æ€è§„åˆ’çŸ©é˜µç”¨äºå›æº¯è·¯å¾„ï¼Œ&lt;code&gt;traj-dist-rs&lt;/code&gt;å®šä¹‰äº†ä¸€ä¸ª&lt;code&gt;DpResult&lt;/code&gt;çš„structå°è£…äº†è¿™ä¸¤ä¸ªå€¼ã€‚&lt;/li&gt;
&lt;li&gt;è€ƒè™‘åˆ°&lt;code&gt;traj-dist-rs&lt;/code&gt;æ˜¯åŒæ—¶æ”¯æŒRustå’ŒPythonä¸¤ç§è¯­è¨€çš„ï¼Œå¹¶ä¸”æä¾›äº†&lt;code&gt;python-binding&lt;/code&gt;è¿™ä¸ªfeatureï¼Œç”¨äºé¢å¤–ç¼–è¯‘é€‚é…Pythonçš„å‡½æ•°å’Œç±»å‹ã€‚å› æ­¤ç›´æ¥å°†&lt;code&gt;DpResult&lt;/code&gt;æš´éœ²ç»™Pythonç¯å¢ƒä¸åˆç†ï¼Œå› æ­¤éœ€è¦å†å®šä¹‰ä¸€ä¸ª&lt;code&gt;PyDpResult&lt;/code&gt;çš„structæš´éœ²ç»™pythonï¼Œè€Œå®ƒåªæœ‰ä¸€ä¸ªå«innerçš„å±æ€§ï¼Œç±»å‹æ˜¯&lt;code&gt;DpResult&lt;/code&gt;ï¼Œè¿™æ ·Rustç”¨æˆ·ç”¨çš„æ˜¯&lt;code&gt;DpResult&lt;/code&gt;ï¼Œè€Œpythonç”¨æˆ·ç”¨çš„æ˜¯&lt;code&gt;PyDpResult&lt;/code&gt;ï¼Œä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œå……åˆ†è§£è€¦ã€‚&lt;/li&gt;
&lt;li&gt;é‚£ä¹ˆç”¨æˆ·åœ¨pythonå¤šè¿›ç¨‹ç¯å¢ƒä¸­è¿è¡ŒåŠ¨æ€è§„åˆ’ç±»ç®—æ³•çš„æ—¶å€™ï¼Œå°±ä¼šé¢ä¸´è¿”å›å€¼åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;PyDpResult&lt;/code&gt;çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œè¿™é‡Œå¾ˆç®€å•ï¼Œå®ç°&lt;code&gt;__reduce__&lt;/code&gt;æ¥å£å³å¯ï¼Œé‚£è¦æŠŠä»€ä¹ˆä¸œè¥¿è¿”å›ç»™pythonå‘¢ï¼Œå…¶å®å°±æ˜¯æŠŠ&lt;code&gt;DpResult&lt;/code&gt;è¿™ä¸ªstructåºåˆ—åŒ–ä¸ºå­—èŠ‚ï¼Œä¼ é€’ç»™pythonï¼Œpythonæ‹¿åˆ°å­—èŠ‚å†ååºåˆ—åŒ–ä¸º&lt;code&gt;DpResult&lt;/code&gt;ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª&lt;code&gt;PyDpResult&lt;/code&gt;å°†å…¶å°è£…å³å¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å› æ­¤è¿™é‡Œæœ€å¤§çš„å¼€é”€å°±æ˜¯å¯¹&lt;code&gt;DpResult&lt;/code&gt;çš„åºåˆ—åŒ–ï¼Œè¿™é‡Œä½¿ç”¨bincodeï¼Œå°†å…¶åºåˆ—åŒ–ä¸ºå­—èŠ‚ï¼Œè¿™æ˜¯æˆ‘æ‰¾åˆ°çš„æœ€å¿«çš„æ–¹æ¡ˆï¼Œç›¸æ¯”serde_jsonè‚¯å®šæ˜¯å¿«å¾ˆå¤šçš„ã€‚å¦‚æœå¤§å®¶æœ‰å…¶ä»–æ–¹æ¡ˆä¹Ÿå¯ä»¥å’Œæˆ‘äº¤æµã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„æºç æ˜¯&lt;code&gt;PyDpResult&lt;/code&gt;çš„ä»£ç ï¼Œçœç•¥äº†ä¸€äº›ä¸æœ¬æ–‡æ— å…³çš„å†…å®¹ï¼Œå±•ç¤ºäº†å¦‚ä½•è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;span class="lnt"&gt;46
&lt;/span&gt;&lt;span class="lnt"&gt;47
&lt;/span&gt;&lt;span class="lnt"&gt;48
&lt;/span&gt;&lt;span class="lnt"&gt;49
&lt;/span&gt;&lt;span class="lnt"&gt;50
&lt;/span&gt;&lt;span class="lnt"&gt;51
&lt;/span&gt;&lt;span class="lnt"&gt;52
&lt;/span&gt;&lt;span class="lnt"&gt;53
&lt;/span&gt;&lt;span class="lnt"&gt;54
&lt;/span&gt;&lt;span class="lnt"&gt;55
&lt;/span&gt;&lt;span class="lnt"&gt;56
&lt;/span&gt;&lt;span class="lnt"&gt;57
&lt;/span&gt;&lt;span class="lnt"&gt;58
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-rust" data-lang="rust"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;/// Python wrapper for the Rust DpResult struct
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;///
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;/// This class wraps the Rust DpResult and provides Python-friendly access
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;/// to the distance and optional matrix.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[cfg(feature = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;python-binding&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[gen_stub_pyclass]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[pyclass(name = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;DpResult&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nc"&gt;PyDpResult&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sd"&gt;/// The inner Rust DpResult
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;inner&lt;/span&gt;: &lt;span class="nc"&gt;crate&lt;/span&gt;::&lt;span class="n"&gt;distance&lt;/span&gt;::&lt;span class="n"&gt;DpResult&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[cfg(feature = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;python-binding&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[gen_stub_pymethods]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[pymethods]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;impl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PyDpResult&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sd"&gt;/// Pickle serialization support using __reduce__
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sd"&gt;///
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sd"&gt;/// Uses bincode to serialize the entire DpResult::inner as bytes for better performance.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sd"&gt;/// Returns a tuple (callable, args) that pickle can use to reconstruct the object.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;__reduce__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;: &lt;span class="nc"&gt;Python&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;PyResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Py&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PyAny&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Py&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PyAny&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Py&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PyAny&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pyo3&lt;/span&gt;::&lt;span class="n"&gt;prelude&lt;/span&gt;::&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;use&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pyo3&lt;/span&gt;::&lt;span class="n"&gt;types&lt;/span&gt;::&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;PyBytes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PyTuple&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Import the module and get the helper function
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;import&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;traj_dist_rs&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;helper_func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getattr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;__dp_result_from_pickle&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Serialize the entire DpResult using bincode
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;serialized&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bincode&lt;/span&gt;::&lt;span class="n"&gt;encode_to_vec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;inner&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bincode&lt;/span&gt;::&lt;span class="n"&gt;config&lt;/span&gt;::&lt;span class="n"&gt;standard&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;map_err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pyo3&lt;/span&gt;::&lt;span class="n"&gt;exceptions&lt;/span&gt;::&lt;span class="n"&gt;PyRuntimeError&lt;/span&gt;::&lt;span class="n"&gt;new_err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="fm"&gt;format!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Serialization failed: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Create args tuple containing the serialized bytes
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bytes_py&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PyBytes&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;serialized&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;let&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args_tuple&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PyTuple&lt;/span&gt;::&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;bytes_py&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_any&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Return (helper_func, args, state) where state is None
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;Ok&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;helper_func&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unbind&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;args_tuple&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unbind&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;None&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;/// Helper function to create DpResult from pickle data
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;///
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt;/// Deserializes the DpResult from bincode-encoded bytes.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[cfg(feature = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;python-binding&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;)]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[gen_stub_pyfunction]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#[pyfunction]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;pub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;fn&lt;/span&gt; &lt;span class="nf"&gt;__dp_result_from_pickle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="cp"&gt;#[gen_stub(override_type(type_repr = &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;bytes&amp;#34;&lt;/span&gt;&lt;span class="cp"&gt;))]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;: &lt;span class="kp"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="kt"&gt;u8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-&amp;gt; &lt;span class="nc"&gt;PyResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PyDpResult&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bincode&lt;/span&gt;::&lt;span class="n"&gt;decode_from_slice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bincode&lt;/span&gt;::&lt;span class="n"&gt;config&lt;/span&gt;::&lt;span class="n"&gt;standard&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dp_result&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;PyDpResult&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;inner&lt;/span&gt;: &lt;span class="nc"&gt;dp_result&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map_err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pyo3&lt;/span&gt;::&lt;span class="n"&gt;exceptions&lt;/span&gt;::&lt;span class="n"&gt;PyRuntimeError&lt;/span&gt;::&lt;span class="n"&gt;new_err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="fm"&gt;format!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Deserialization failed: &lt;/span&gt;&lt;span class="si"&gt;{}&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™æ ·å®ç°çš„åºåˆ—åŒ–æ¥å£ï¼Œå°±å¯ä»¥ä½¿&lt;code&gt;PyDpResult&lt;/code&gt;è¾¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åºåˆ—åŒ–æ€§èƒ½äº†ï¼Œè¿™æ ·ä¹Ÿå°±å¯ä»¥å¸®åŠ©Pythonå¤šè¿›ç¨‹ç¯å¢ƒä¸‹çš„æ€§èƒ½æå‡äº†ã€‚&lt;/p&gt;
&lt;h2 id="å…­å®æˆ˜traj-dist-rsæå‡trajclçš„æ•°æ®é¢„å¤„ç†æ€§èƒ½"&gt;å…­ã€å®æˆ˜ï¼š&lt;code&gt;traj-dist-rs&lt;/code&gt;æå‡&lt;code&gt;TrajCL&lt;/code&gt;çš„æ•°æ®é¢„å¤„ç†æ€§èƒ½
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;TrajCL&lt;/code&gt;æ˜¯ä¸€ä¸ªç”¨äºä½¿ç”¨æ·±åº¦å­¦ä¹ ç®—æ³•è¿‘ä¼¼è½¨è¿¹ç›¸ä¼¼åº¦çš„æ–¹æ³•ï¼š&amp;ldquo;TrajCL: Contrastive Trajectory Similarity Learning with Dual-Feature Attention&amp;rdquo;ã€‚åœ¨è®ºæ–‡ä½œè€…çš„&lt;a class="link" href="https://github.com/changyanchuan/TrajCL/blob/master/utils/preprocessing_porto.py" target="_blank" rel="noopener"
&gt;å¼€æºä»£ç &lt;/a&gt;é‡Œé¢ï¼Œæä¾›äº†å¯¹portoæ•°æ®é›†ä¸­è½¨è¿¹ç›¸ä¼¼åº¦çš„è®¡ç®—ï¼Œä½¿ç”¨&lt;code&gt;traj-dist&lt;/code&gt;+pythonå¤šè¿›ç¨‹å®Œæˆã€‚æˆ‘ä»¬è¿™é‡Œå°†ä½œè€…çš„æºä»£ç å–å‡ºå¹¶ä½œè½»é‡ä¼˜åŒ–ï¼Œä¸æˆ‘ä»¬çš„&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„&lt;code&gt;pdist&lt;/code&gt;å¹¶è¡Œç‰ˆåšæ€§èƒ½å¯¹æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…ä»portoæ•°æ®é›†ä¸­æŒ‘é€‰äº†è½¨è¿¹é•¿åº¦åœ¨20åˆ°200ä¹‹é—´çš„åºåˆ—ï¼Œé€‰å‡º7000æ¡ä½œä¸ºè®­ç»ƒé›†ï¼Œè®¡ç®—è¿™7000æ¡çŸ©é˜µä¹‹é—´çš„è·ç¦»ï¼ˆä¸Šä¸‰è§’ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åˆ›å»ºäº†ä¸€ä¸ª4æ ¸8Gçš„podï¼Œå¯¹è¿™7000æ¡è½¨è¿¹è¿›è¡Œdtwè®¡ç®—ï¼Œæµ‹è¯•ä¸‹æ¥çš„æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;tool&lt;/th&gt;
&lt;th&gt;running time(s)&lt;/th&gt;
&lt;th&gt;speedup&lt;/th&gt;
&lt;th&gt;Peak Memory (MB)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist&lt;/td&gt;
&lt;td&gt;2932.84s&lt;/td&gt;
&lt;td&gt;1x&lt;/td&gt;
&lt;td&gt;1061.68 MB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;traj-dist-rs&lt;/td&gt;
&lt;td&gt;92.21s&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;31.81x&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;642.11 MB&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;traj-dist-rs&lt;/code&gt;çš„&lt;code&gt;pdist&lt;/code&gt;å‡½æ•°ï¼Œå¯ä»¥è®©ä¹‹å‰çš„æ•°æ®é¢„å¤„ç†éƒ¨åˆ†æ€§èƒ½æå‡31.8å€ï¼Œæ•ˆæœæå‡å¾ˆæ˜æ˜¾ï¼Œè€Œä¸”å†…å­˜ç”¨é‡æ˜æ˜¾æ›´å°‘ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯&lt;code&gt;traj-dist-rs&lt;/code&gt;æµ‹è¯•ç”¨çš„æºç ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;polars&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pl&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;traj_dist_rs&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Metric&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pdist&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_trajs&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_parquet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;trajcl_samples.parquet&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;start_idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end_idx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;trajs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;seq&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_numpy&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start_idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end_idx&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;trajs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_trajs&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;pdist&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;metric&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Metric&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dtw&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;parallel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸‹é¢è¿™æ˜¯ä»è®ºæ–‡ä½œè€…ä»£ç ä¸­æˆªå–å‡ºæ¥ï¼Œå¹¶åšäº†ä¸€äº›æ€§èƒ½ä¼˜åŒ–çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;span class="lnt"&gt;24
&lt;/span&gt;&lt;span class="lnt"&gt;25
&lt;/span&gt;&lt;span class="lnt"&gt;26
&lt;/span&gt;&lt;span class="lnt"&gt;27
&lt;/span&gt;&lt;span class="lnt"&gt;28
&lt;/span&gt;&lt;span class="lnt"&gt;29
&lt;/span&gt;&lt;span class="lnt"&gt;30
&lt;/span&gt;&lt;span class="lnt"&gt;31
&lt;/span&gt;&lt;span class="lnt"&gt;32
&lt;/span&gt;&lt;span class="lnt"&gt;33
&lt;/span&gt;&lt;span class="lnt"&gt;34
&lt;/span&gt;&lt;span class="lnt"&gt;35
&lt;/span&gt;&lt;span class="lnt"&gt;36
&lt;/span&gt;&lt;span class="lnt"&gt;37
&lt;/span&gt;&lt;span class="lnt"&gt;38
&lt;/span&gt;&lt;span class="lnt"&gt;39
&lt;/span&gt;&lt;span class="lnt"&gt;40
&lt;/span&gt;&lt;span class="lnt"&gt;41
&lt;/span&gt;&lt;span class="lnt"&gt;42
&lt;/span&gt;&lt;span class="lnt"&gt;43
&lt;/span&gt;&lt;span class="lnt"&gt;44
&lt;/span&gt;&lt;span class="lnt"&gt;45
&lt;/span&gt;&lt;span class="lnt"&gt;46
&lt;/span&gt;&lt;span class="lnt"&gt;47
&lt;/span&gt;&lt;span class="lnt"&gt;48
&lt;/span&gt;&lt;span class="lnt"&gt;49
&lt;/span&gt;&lt;span class="lnt"&gt;50
&lt;/span&gt;&lt;span class="lnt"&gt;51
&lt;/span&gt;&lt;span class="lnt"&gt;52
&lt;/span&gt;&lt;span class="lnt"&gt;53
&lt;/span&gt;&lt;span class="lnt"&gt;54
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;multiprocessing&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;mp&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;polars&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pl&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;traj_dist.distance&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tdist&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# ä¼˜åŒ– 1ï¼šç›´æ¥æ¥æ”¶ List[np.ndarray]ï¼ŒæŠ›å¼ƒ Pandas DataFrame&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_simi_matrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ndarray&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;]]:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;batch_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;batch_size&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;tasks&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;batch_size&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ceil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;batch_size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# ä¼˜åŒ– 2ï¼šæŠŠåŸæœ¬ä¼  DataFrame æ”¹ä¸ºä¼  trajs åˆ—è¡¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;batch_size&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;batch_size&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;batch_size&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;num_cores&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cpu_count&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;pool&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Pool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num_cores&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;lst_simi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;starmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_simi_comp_operator&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;pool&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;lst_simi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_simi_comp_operator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ndarray&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;sub_idx&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;]):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;simi&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sub_idx&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;t_i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;_i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# ä¼˜åŒ– 3ï¼šç›´æ¥ List ç´¢å¼•ï¼ŒO(1) ä¸”æå¿«ï¼Œå¹²æ‰ .iloc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;simi_row&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;t_j&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;_j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# åŒä¸Š&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;simi_row&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;t_i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t_j&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;simi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;simi_row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;simi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_trajs&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# ç»Ÿä¸€ä½¿ç”¨ polars è¯»å–ï¼Œä¿è¯æ•°æ®å‡†å¤‡é˜¶æ®µç»å¯¹å…¬å¹³&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_parquet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;trajcl_samples.parquet&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;start_idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end_idx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;trajs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;seq&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_numpy&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start_idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end_idx&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;trajs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_trajs&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="c1"&gt;# è®¡æ—¶å¼€å§‹ï¼ˆä¸åŒ…å«æ•°æ®è¯»å–éƒ¨åˆ†ï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;_simi_matrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tdist&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dtw&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;trajs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Optimized Baseline Time: &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;s&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="ä¸ƒæ€»ç»“"&gt;ä¸ƒã€æ€»ç»“
&lt;/h2&gt;&lt;p&gt;è¿™æ¬¡æ‰¹é‡è®¡ç®—çš„æ€§èƒ½ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ ä¸ªå®è´µçš„ç»éªŒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç“¶é¢ˆè½¬ç§»ï¼šä¼˜åŒ–å®Œæ ¸å¿ƒç®—æ³•ï¼ˆRust/Cythonï¼‰åï¼Œç“¶é¢ˆä¼šè½¬ç§»åˆ°Pythonçš„è°ƒç”¨å±‚ï¼ˆå¾ªç¯ã€GILã€æ•°æ®å¤åˆ¶ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;â€œæ‰¹å¤„ç†â€ä¸‹æ²‰ï¼šå¯¹äºæ‰¹é‡è®¡ç®—ä»»åŠ¡ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯è®¾è®¡ä¸€ä¸ªèƒ½æ¥æ”¶æ•´ä¸ªæ•°æ®é›†çš„åº•å±‚å‡½æ•°ï¼Œå°†å¾ªç¯å’Œè°ƒåº¦å®Œå…¨ä¸‹æ²‰åˆ°é«˜æ€§èƒ½è¯­è¨€ï¼ˆRust/C++ï¼‰ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œæ¨¡å‹çš„é€‰æ‹©ï¼šåœ¨Rustä¸­ï¼ŒåŸºäºå…±äº«å†…å­˜çš„å¤šçº¿ç¨‹å¹¶è¡Œé€šå¸¸æ›´ä¼˜äºPythonä¸­åŸºäºåºåˆ—åŒ–çš„å¤šè¿›ç¨‹å¹¶è¡Œï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®é‡å¤§æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶è¡ŒåŒ–ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼šå¹¶è¡ŒåŒ–æœ‰å…¶è‡ªèº«å¼€é”€ã€‚å¯¹äºè®¡ç®—é‡æå°çš„ä»»åŠ¡ï¼Œä¸²è¡Œå°±æ˜¯æœ€å¥½çš„æ–¹æ¡ˆã€‚åœ¨è®¾è®¡çš„æ—¶å€™å°±åº”è¯¥ç»™ç”¨æˆ·æä¾›ä¸²è¡Œå’Œå¹¶è¡Œçš„æ¥å£ï¼Œè®©ç”¨æˆ·è‡ªå·±é€‰æ‹©ã€‚&lt;/li&gt;
&lt;/ol&gt;</description></item></channel></rss>